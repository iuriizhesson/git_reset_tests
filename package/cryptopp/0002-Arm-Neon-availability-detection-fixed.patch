From 8b1c443fa3e2f892947156093c21991c3eb59b53 Mon Sep 17 00:00:00 2001
Message-Id: <8b1c443fa3e2f892947156093c21991c3eb59b53.1553856217.git.yzhesson@iotecha.com>
From: Yury Zhesson <yzhesson@iotecha.com>
Date: Fri, 29 Mar 2019 13:42:39 +0300
Subject: [PATCH] Arm Neon availability detection fixed

Not every ARM processor has Arm Neon architecture extension
---
 config.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/config.h b/config.h
index 8db32c6..482e6c9 100644
--- a/config.h
+++ b/config.h
@@ -630,7 +630,7 @@ NAMESPACE_END
 // Requires GCC 4.3, Clang 2.8 or Visual Studio 2012
 // Do not use APPLE_CLANG_VERSION; use __ARM_FEATURE_XXX instead.
 #if !defined(CRYPTOPP_ARM_NEON_AVAILABLE) && !defined(CRYPTOPP_DISABLE_ASM)
-# if defined(__arm__) || defined(__ARM_NEON) || defined(__ARM_FEATURE_NEON) || defined(_M_ARM)
+# if (defined(__arm__) || defined(_M_ARM)) && (defined(__ARM_NEON) || defined(__ARM_FEATURE_NEON))
 #  if (CRYPTOPP_GCC_VERSION >= 40300) || (CRYPTOPP_CLANG_VERSION >= 20800) || \
       (CRYPTOPP_MSC_VERSION >= 1700)
 #   define CRYPTOPP_ARM_NEON_AVAILABLE 1
-- 
2.11.0

